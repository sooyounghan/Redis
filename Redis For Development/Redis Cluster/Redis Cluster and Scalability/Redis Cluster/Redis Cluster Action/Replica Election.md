-----
### 복제본 선출
-----
1. 복제본이 페일오버를 직접 시도하는 조건
   - 마스터가 FAIL 상태
   - 마스터가 1개 이상 해시슬롯을 가지고 있음
   - 마스터와 복제가 끊어진지 오래 (파라미터로 조절 가능)

2. 위 조건을 모두 만족할 때, 복제본은 마스터로 선출되기 위해 자신의 현재 에포크 값을 1 증가시키고, 마스터 인스턴스에게 투표 요청
<div align="center">
<img src="https://github.com/user-attachments/assets/e3828518-28c5-4d91-bbb4-45baef022cd7">
</div>

   - 우선 복제본은 클러스터의 모든 마스터 노드에 FAILOVER_AUTH_REQUEST 패킷을 보내 투표 요청
   - 요청을 받은 마스터는 FAILOVER_AUTH_ACK 패킷으로 긍정적 응답을 보내 투표에 동의함을 알림
   - 이 때, 마스터는 동시에 다른 복제본을 승격시키는 것을 방지하기 위해 NODE_TIMEOUT * 2 시간 동안 같은 마스터로 승격되고자 하는 다른 복제본에게는 투표 불가
   - 응답을 받은 복제본은 현재 에포크 값보다 작은 에포크로 온 AUTH_ACK에 대한 응답은 무시하므로, 이전 버전의 투표에 대한 응답은 거를 수 있음
   - 다수의 마스터로부터 ACK를 받은 복제본이 마스터 후보로 선출되며, NODE_TIMEOUT * 2 시간 동안 과반수 이상의 마스터에게서 ACK가 오지 않으면 페일오버는 중단
   - 이후 NODE_TIMEOUT * 4 만큼의 지연 후 다시 새로운 투표 가능

3. 마스터가 FAIL 상태가 된 이후 복제본은 계산된 짧은 딜레이를 가진 뒤 투표 시작
```
DELAY = 500 ms + 랜덤 지연 시간 (0 ~ 500ms) + SLAVE_RANK * 1000 ms
```
   - 랜덤한 지연 시간을 이용해 같은 마스터에 연결된 여러 복제본에서 동시에 투표를 시작하는 것 방지 가능
   - SLAVE_RANK는 마스터에서 처리한 복제 데이터의 양과 관련된 복제본의 우선순위
   - 마스터가 FAIL 상태가 되면, 복제본끼리 메세지를 교환하는데, 가장 최근의 오프셋을 가진 복제본이 0순위, 두 번째는 1순위와 같은 방식으로 우선순위 부여
