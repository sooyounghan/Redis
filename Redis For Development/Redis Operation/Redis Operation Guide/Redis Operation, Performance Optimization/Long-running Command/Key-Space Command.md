-----
### 커맨드 유형별 O(N) 이상의 시간 복잡도를 갖는 커맨드 - 키스페이스 커맨드
-----
1. 시간 복잡도에서 N은 전체 키의 개수를 의미하며, 커맨드의 시간 복잡도가 O(N)일 떄, 레디스에 저장된 키의 개수이 비레해 수행 시간 증가
   - KEYS : 레디스에 저장된 모든 키에 한 번씩 접근하므로 O(N)의 시간 복잡도를 가짐
     + 키가 많다면, 출력에 오랜 시간이 소요될 수 있으므로, SCAN 커맨드로 대체하는 것이 좋음

   - FLAUSHALL : 옵션 없이 FUSHALL을 사용하면 SYNC 방식으로 동작
     + 모든 키를 삭제한 뒤 OK를 반환하므로 O(N)의 시간 복잡도를 가짐
     + 완료될 때까지 다른 응답을 처리할 수 없음
     + FLUSHALL과 ASYNC 옵션을 함께 사용하면 데이터 삭제 작업이 백그라운드에서 수행되므로 다른 작업을 블록시키지 않으며, 이 때 FLUSHALL 실행 중 새로 생성된 키는 삭제되지 않음

   - FLUSHDB : SYNC 방식으로 동작
     + 선택된 데이터베이스에 속한 모든 키를 삭제한 뒤 OK를 반환하므로 O(N)의 시간 복잡도
     + 삭제가 완료될 때까지 다른 응답을 처리할 수 없음
     + FLUSHDB와 ASYNC 옵션을 함께 사용하면 데이터 삭제 작업이 백그라운드에서 수행되므로 다른 작업을 블록시키지 않으며, 이 때 FLUSHALL 실행 중 새로 생성된 키는 삭제되지 않음

2. LAZY FREEING
   - 레디스에서는 기본적으로 DEL 커맨드로 키를 삭제
   - DEL는 동기 방식으로 키를 삭제하며, string 자료 구조나 아이템의 개수가 많지 않은 다른 자료 구조를 삭제할 때 매우 빠르게 수행
   - 그러나 수백만 개의 아이템을 가지고 있는 큰 키를 삭제할 때는 오랜 시간이 걸릴 수 있음
   - 이런 이유로 레디스는 비동기적으로 메모리를 해제하는 UNLINK와 같은 삭제 방식 제공
   - 클라이언트에서 유저가 직접 DEL 커맨드를 수행하는 경우도 있지만, 레디스에서 시스템적으로 키를 삭제해야 하는 경우도 존재
   - 메모리가 maxmemory에 도달해 키의 이빅션이 발생할 때에도 키가 삭제되며, 키가 만료 시간에 다다랐을 때도 삭제해야 함
   - 또는 다른 커맨드로 인해 삭제될 때도 있는데, 예를 들어, rename과 같은 커맨드를 수행하면 기존 키 내용은 삭제되고 새로운 키로 대체
   - 또한, 복제가 발생하면 복제본의 데이터를 전체 삭제(FLUSH)하므로 이 때도 키의 삭제가 발생
   - 이러한 키 삭제 시나리오에서 기본 동작은 키를 동기적으로 삭제하는 것이지만, 설정값을 변경해 기본적으로 키를 비동기적으로 삭제하도록 구성 가능
     + lazyfree-lazy-eviction : 메모리 제한(maxmemory)를 위한 데이터 삭제 시, 동기적 삭제 여부 설정
     + lazyfree-lazy-expire : 만료 시간이 지난 키의 동기적 삭제 여부 설정
     + lazyfree-lazy-server-del : 서버 동기화나 다른 명령의 사이드이펙트로 인한 키 삭제 시, 동기적 삭제 여부 설정
     + replica-lazy-flush : 복제 동기화 시 데이터베이스 내용을 삭제할 때 동기적 삭제 여부 설정
     + lazyfree-lazy-user-del : 사용자 코드에서 DEL 호출을 UNLINK 호출과 동일하게 처리

   - 이 설정값 모두 기본값은 no이며, yes로 변경할 때 충분한 모니터링이 필요
   - 이 설정을 사용하면 키와 값의 연결이 해제되지만, 해당 데이터가 메모리에서 바로 삭제되지 않고 일시적으로 메모리에 남아있게 됨
   - 이로 인해 메모리 사용량은 예상보다 더 증가할 수 있으므로, 이 옵션을 활성화할 때에는 주의가 필요하며, 메모리 사용량과 성능을 신중하게 모니터링해야 함
   - 또한, 이러한 lazyfree 설정값을 yes로 지정하더라도 동기적으로 키가 삭제되는 경우 존재
   - 레디스 코드에서 freeObjAsync 함수를 살펴보면, 레디스는 먼저 lazyfreeGetFreeEffort 함수를 호출해 특정 키의 메모리를 해제하는 데 드는 노력을 계산
<div align="center">
<img src="https://github.com/user-attachments/assets/5523b5ae-1184-40fb-82f9-12ba62fed641">
</div>

   - 키 삭제에 대한 노력이 LAZYFREE_THRESHOLD 값인 64보다 크고 객체의 참조 카운트가 1인 경우에만 비동기적으로 메모리 해제
   - 이러한 알고리즘은 큰 데이터 구조를 처리할 때 유용하며, 노력의 평가를 통해 비동기적 메모리 해제가 성능 향상에 도움이 될지, 아니면 동기적 해제가 더 효율적일지 결정
   - 만약 삭제에 드는 노력의 값이 64보다 작거나 객체가 공유되고 있다면 레디스는 동기적으로 DEL 명령을 사용해 키를 삭제
   - 이러한 메커니즘은 메모리 해제 작업의 오버헤드를 줄이고, 메모리 관리 및 성능 특성을 세밀하게 조정하는 데 도움을 줌
