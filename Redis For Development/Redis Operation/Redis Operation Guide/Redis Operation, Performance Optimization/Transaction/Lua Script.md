-----
### 루아 스크립트
-----
1. 가볍고 빠르며 임베디드가 가능한 스크립트 언어
2. 간단한 문법과 실행 속도를 가짐
3. 레디스는 루아 스크립트 실행 기능을 내장해 데이터 조작 및 개선과 같은 작업을 루아 스크립트로 처리할 수 있게 해줌
4. 루아 스크립트는 레디스 내에서 원자적으로 실행되므로 여러 명령을 한 번에 실행하고, 중간에 다른 클라이언트 요청을 수용하지 않아 일관성 유지 가능
5. 트랜잭션과 비슷한 원자성을 갖지만, 트랜잭션과 달리 일부 명령어가 실패해도, 다음 명령어로 진행되며, 롤백이 발생하지 않는 특징 존재
6. 따라서, 이를 적절하게 활용하면 데이터를 매번 네트워크로 전송하지 않고, 서버에서 계산을 수행해 애플리케이션 성능을 향상시킬 수 있음
7. 트랜잭션과 같은 상황을 루아 스크립트에서 구현
<div align="center">
<img src="https://github.com/user-attachments/assets/0dc25906-b4e0-4708-b0d1-75b58ec9c55c">
</div>

   - 레디스에서 스크립트를 로드하고 실행하려면 다음과 같이 SCRIPT LOAD 커맨드와 EVALSHA 스크립트 사용 가능
<div align="center">
<img src="https://github.com/user-attachments/assets/e115928f-d68d-4cc3-a720-8755870f697a">
</div>

   - SCRIPT LOAD 커맨드 : 루아 스크립트를 레디스에 로드하는 커맨드
   - 스크립트를 로드하면 해당 스크립트에 대한 Hash 값 반환
   - 한 번 로드한 이후에는 반환된 해시값을 사용해 스크립트 실행 가능
   - EVALSHA를 사용하면 스크립트를 다시 전송하지 않고, 스크립트를 반복해 실행할 수 있으므로 네트워크 대역폭을 절약할 수 있음
<div align="center">
<img src="https://github.com/user-attachments/assets/e1d9a596-3468-460d-843b-6593717ac852">
</div>

8. 트랜잭션과 루아 스크립트를 사용할 때의 주의점
   - 트랜잭션과 루아 스크립트를 잘 이용하면 여러 개 레디스 커맨드를 원자적으로 실행할 수 있어 데이터 일관성을 유지할 수 있다는 장점 존재
   - 특히, 루아 스크립트를 잘 이용하면 복잡한 데이터 조작과 로직을 구현할 수 있고, 레디스에서 데이터를 처리해 네트워크 부하를 줄일 수 있다는 장점 존재
   - 하지만 트랜잭션과 루아 스크립트를 사용하는 도중에 다른 클라이언트의 커맨드는 모두 대기하게 되므로, 트랜잭션의 길이가 길어지지 않도록 각별한 주의가  필요
   - 레디스에서는 트랜잭션과 루아 스크립트 내부 블로킹 커맨드(BLPOP, BRPOP)를 사용할 수 없도록 강제함
   - 따라서, 트랜잭션 내부에서 블로킹되면, 레디스는 무한 대기 상태에 빠질 수 있음
<div align="center">
<img src="https://github.com/user-attachments/assets/65534237-c41a-46e2-a745-1a09154d0a1f">
</div>
