-----
### 장애 또는 성능 저하를 유발할 수 있는 레디스 설정 항목
-----
1. maxmemory-policy
   - 레디스가 메모리 한계에 도달했을 때 어떤 키를 제거할 것인지 결정하는 설정값
   - 기본값은 noeviction으로 설정되어있으며, 레디스에 데이터가 가득차 있더라도 임의로 데이터를 삭제하지 않고, 레디스에 데이터를 더 저장할 수 없는 에러 반환
   - 메모리가 가득찬 상황에서 데이터를 임의로 삭제하지 않아 데이터 유실은 방지할 수 있으나, 더 이상 레디스에 아무런 데이터를 입력할 수 없어 로직에 따라 애플리케이션 장애로 이어질 수 있음
   - 따라서, 만약 레디스의 일부 데이터가 임의로 삭제되더라도 계속해서 새로운 입력을 받아들일 수 있도록 설정하고 싶다면 이 값은 allkeys-lru로 설정할 것 권장

2. stop-writes-on-bgsave-error
   - 이 설정은 RDB 스냅샷이 정상적으로 저장되지 않았을 때, 레디스로의 모든 쓰기 작업을 중지하는 역할
   - 이로써, 최신 백업이 실패한 것을 인지하고 서버에 문제가 있음을 알려 더 큰 장애 발생 가능
   - 그러나 레디스 서버에 이미 다른 모니터링 기능이 활성화 되어 있어, 디스크 문제가 발생해도 이를 신속하게 감지할 수 있음
   - 만약, 레디스 쓰기 작업이 중단되지 않고, 계속되길 원한다면 이 설정을 비활성화하는 것이 좋음
   - 기본 설정값은 yes이며, 이 값을 no로 변경하면 백업 파일 생성 실패 시에도 레디스의 쓰기 작업이 계속 수행될 수 있음

3. 자동 백업 옵션
   - 레디스에서 RDB와 AOF를 상요해 백업 파일을 생성하는 작업은 운영 중인 레디스 인스턴스에 큰 부하를 줄 수 있음
   - 백업이 포그라운드로 수행된다면, 즉, 메인 스레드에서 실행된다면 해당 작업이 실행되는 동안 다른 작업은 대기해야 하므로 성능에 당연히 영향을 미침
   - 백그라운드로 실행될 때는, COW(Copy-On-Write) 방식으로 작동하므로, 메모리 사용량이 최대 maxmemory의 두 배까지 증가할 수 있음
   - 적절한 maxmemory 설정을 하지 않았을 경우, 메모리에 부담을 줄 수 있으며, 최악의 경우 OOM 오류 유발 가능
   - 그러므로 백업 작업은 의도한 시간에 의도한 레디스 인스턴스에서 실행될 수 있도록 설정하는 것이 좋음
   - save 옵션 : 일정한 기간 동안 변경된 키 수의 개수가 조건에 맞을 때 자동으로 RDB 파일 생성
     + save 옵션의 기본값
<div align="center">
<img src="https://github.com/user-attachments/assets/a53bb535-0059-47f6-b658-04fb11f3d74b">
</div>

   - 1시간(3600초) 동안 적어도 1번의 변경 작업이 수행되거나, 5분(300초) 동안 적어도 100번의 변경 작업이 수행되거나, 1분(60초) 동안 적어도 10000번의 변경 작업이 수행되는 조건에 해당하면 자동으로 RDB 파일 생성
   - 대규모 트래픽 환경에서 이러한 기본 설정을 유지한다면, RDB 파일의 백업 빈도가 너무 높아질 수 있으므로, 운영자는 원하는 시간에 백업이 수행되도록 기본 설정값이 사용하지 않고 설정하는 것이 좋음
<div align="center">
<img src="https://github.com/user-attachments/assets/018c9e64-0d30-49c2-86f9-56a567c0cd89">
</div>

   - appendonly 옵션을 yes로 설정해 AOF 형식 백업을 수행하는 경우에도 주의 : 기본적으로, AOF 파일 크기가 기존 AOF 파일보다 100% 증가하면 자동 재작성 발생
<div align="center">
<img src="https://github.com/user-attachments/assets/80b494e8-11df-4992-9966-1e0adda31328">
</div>

   - 그러나 이런 동작을 의도하지 않은 경우 auto-aof-rewrite-percentage 값을 0으로 변경해 자동으로 재작성되는 작업을 방지하고, 운영자가 원하는 시간에 수동으로 재작성할 수 있도록 설정하는 것이 좋음 
<div align="center">
<img src="https://github.com/user-attachments/assets/969bd5e6-e153-45bc-aaf6-1eab41e8afe5">
</div>
