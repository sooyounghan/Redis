-----
### Secondary 복제 ID
-----
1. 한 개의 복제본 그룹 내 모든 레디스 노드는 동일한 복제 ID를 가짐
<div align="center">
<img src="https://github.com/user-attachments/assets/f1c270eb-5038-4354-be78-d95215ce9c38">
</div>

   - 복제본 노드 B와 C는 마스터 노드인 A의 복제 ID와 동일한 복제 ID를 가지고 있음

2. A 노드에 장애가 발생해 복제가 끊어지고, 복제본 B가 새로운 노드로 승격되는 상황
<div align="center">
<img src="https://github.com/user-attachments/assets/d431c25b-aebc-4cf2-b019-ecc2fbe54a5a">
</div>

   - 마스터 노드와의 복제가 끊어짐과 동시에 복제본은 새로운 복제 ID를 가짐
   - 앞서 복제 ID가 동일하다는 것은 동일한 데이터셋을 가짐을 의미
   - 만약 복제가 끊어진 뒤에도 노드 B가 기존의 복제 ID인 aaaa를 유지하며 마스터로 동작하다가 장애가 해결된 뒤, 기존 마스터 노드였던 A와 다시 연결된다면 두 노드는 동일한 복제 ID, 동일한 오프셋이 동일한 데이터셋을 갖는다는 사실을 위반할 수 있음
   - 노드 B는 새로운 마스터로 승격과 동시에 새로운 복제 ID인 bbbb를 갖게 되었으며, 기존의 복제 ID는 master_replid2에 저장
     + 기존 A의 복제본이었던 노드 C는 B에 연결되었으며, B의 복제 ID인 bbbb를 복제 ID로 갖게 됨
     + C도 기존 A 노드에 연결되었으므로 master_replid2에는 A의 복제 ID인 aaaa를 가지고 있음

   - 노드 C가 B에 복제 연결이 될 때, 두 노드의 master_replid2가 같으므로 노드 C는 노드 B에 부분 재동기화를 시도
     + 노드 B와 C 모두 기존 노드 A의 복제본으로 동일한 데이터셋을 가지고 있으므로, 노드 B의 백로그가 재동기화를 하기 위한 데이터를 갖고 있는 경우라면, 부분 재동기화만으로 노드 C가 노드 B에 연결될 수 있음

   - 노드 B에서 RDB 파일을 백업받아 C로 전송하는 전체 재동기화를 거치지 않아도 되므로 불필요한 작업을 줄일 수 있으며, 빠르게 복제 상태 구축 가능

3. 즉, 레디스가 2개의 복제 ID를 갖는 이유는 마스터로 승격되는 복제본 때문임
   - 같은 복제 그룹 내 페일오버 이후 승격된 새로운 마스터에 연결된 복제본은 전체 재동기화를 수행할 필요가 없을 수 있음
