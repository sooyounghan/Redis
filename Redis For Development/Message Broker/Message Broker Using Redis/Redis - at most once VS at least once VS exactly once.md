-----
### 레디스 stream에서의 at most once vs. at least once vs. exactly once
-----
1. 메세징 시스템에서는 다음과 같은 세 가지 메세지 보증 전략을 갖추고 있음 : 애플리케이션 특성에 다라 해당 전략을 적절히 사용하면 됨
2. at most once : 메세지를 최대 한 번 보내는 것을 의미
   - 소비자는 메세지를 받자마자 실제 처리하기 전 먼저 ACK를 보냄
   - 이로 인해 속도는 향상되지만 ACK를 보낸 뒤 소비자에 문제가 생겨 서비스가 다운됐을 때 이미 ACK를 보냈지만 실제 처리하지 못한 데이터는 잃을 수 있음
   - 메세지 일부가 손실되더라도 빠른 응답이 필요한 경우 선택하는 전략

3. at least once : 소비자는 받은 메세지를 모두 처리한 뒤 ACK를 보냄
<div align="center">
<img src="https://github.com/user-attachments/assets/7391afab-1279-4cbb-8f1a-66c514a0ef6e">
</div>

   - ACK 전송이 지연되어, 실제로 메세지가 처리됐지만 ACK를 전송하기 전 소비자가 종료되는 상황 발생 가능
   - 이럴 경우, 보류 리스트에 처리된 메세지도 남아있으므로 이미 처리한 이미지를 한 번 더 처리하게 되는 상황 발생 가능
   - 이메일 서버 1에서 129-0과 130-1을 받은 뒤, 129-0 메세지는 처리했고, 130-1은 처리하지 못해서 ACK를 보내지 못하고 서비스가 재시작 되었다고 가정
     + 보류 리스트엥 남아 있는 메세지를 다시 전부 읽어가기 때문에 130-1 메세지는 두 번 처리하게 됨
     + 만약 멱등함이 보장되는 서비스라면 문제가 없으나, 그렇지 않을 경우 문제가 될 소지가 있음

4. exactly once : 모든 메세지가 한 번씩 무조건 전송되는 것을 보장한다는 의미
   - 이런 방식으로 메세지를 전송하려면 추가적인 기능이 필요할 수 있음
   - 만약 레디스 stream을 이용하면서 exactly once하게 메세지를 전송하고싶다면, 레디스의 set 등의 추가 자료 구조를 이용해 이미 처리된 메세지인지 아닌지 확인하는 과정 필요

